From bffbc4fa16f1f5abfedc5a4d58e7889a3ae331d9 Mon Sep 17 00:00:00 2001
From: Yuta Saito <kateinoigakukun@gmail.com>
Date: Wed, 14 Feb 2024 12:43:15 +0000
Subject: [PATCH] HACK: [wasm] Hard-define wasi-libc constants

They are defined in the way ClangImporter can't handle them
---
 Sources/Foundation/FileManager+POSIX.swift | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/Sources/Foundation/FileManager+POSIX.swift b/Sources/Foundation/FileManager+POSIX.swift
index a69d71e9..462d9341 100644
--- a/Sources/Foundation/FileManager+POSIX.swift
+++ b/Sources/Foundation/FileManager+POSIX.swift
@@ -13,6 +13,16 @@ internal func &(left: UInt32, right: mode_t) -> mode_t {
 }
 #endif
 
+#if os(WASI)
+import WASILibc
+let DT_DIR: UInt8 = 0x3
+let O_WRONLY: Int32 = 0x10000000
+let O_CREAT: Int32 = 1 << 12
+let O_DIRECTORY: Int32 = 1 << 13
+let O_EXCL: Int32 = 1 << 14
+let O_TRUNC: Int32 = 1 << 15
+#endif
+
 @_implementationOnly import CoreFoundation
 
 extension FileManager {
-- 
2.43.0

