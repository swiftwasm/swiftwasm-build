From 19feefc7599bdf59f0f2e9f24c5f11edf4937dbd Mon Sep 17 00:00:00 2001
From: Yuta Saito <kateinoigakukun@gmail.com>
Date: Tue, 20 Jun 2023 10:14:36 +0000
Subject: [PATCH] [wasm][build] Use forked foundation and xctest

---
 .../update-checkout-config.json               | 56 +++++++++++++++++--
 1 file changed, 50 insertions(+), 6 deletions(-)

diff --git a/utils/update_checkout/update-checkout-config.json b/utils/update_checkout/update-checkout-config.json
index 9e8df6cf6ab..1fbece83361 100644
--- a/utils/update_checkout/update-checkout-config.json
+++ b/utils/update_checkout/update-checkout-config.json
@@ -3,7 +3,7 @@
     "https-clone-pattern": "https://github.com/%s.git",
     "repos" : {
         "swift": {
-            "remote": { "id": "apple/swift" } },
+            "remote": { "id": "swiftwasm/swift" } },
         "cmark": {
             "remote": { "id": "apple/swift-cmark" } },
         "llbuild": {
@@ -35,9 +35,9 @@
         "swift-stress-tester": {
             "remote": { "id": "apple/swift-stress-tester" } },
         "swift-corelibs-xctest": {
-            "remote": { "id": "apple/swift-corelibs-xctest" } },
+            "remote": { "id": "swiftwasm/swift-corelibs-xctest" } },
         "swift-corelibs-foundation": {
-            "remote": { "id": "apple/swift-corelibs-foundation" } },
+            "remote": { "id": "swiftwasm/swift-corelibs-foundation" } },
         "swift-corelibs-libdispatch": {
             "remote": { "id": "apple/swift-corelibs-libdispatch" } },
         "swift-integration-tests": {
@@ -47,8 +47,7 @@
         "ninja": {
             "remote": { "id": "ninja-build/ninja" } },
         "icu": {
-            "remote": { "id": "unicode-org/icu" },
-            "platforms": [ "Linux" ]
+            "remote": { "id": "unicode-org/icu" }
         },
         "yams": {
             "remote": { "id": "jpsim/Yams" }
@@ -88,8 +87,53 @@
         "llvm-project": {
             "remote": { "id": "apple/llvm-project" } }
     },
-    "default-branch-scheme": "main",
+    "default-branch-scheme": "wasm",
     "branch-schemes": {
+        "wasm": {
+            "aliases": ["wasm", "swiftwasm"],
+            "repos": {
+                "llvm-project": "stable/20221013",
+                "swift-llvm-bindings": "stable/20221013",
+                "swift": "swiftwasm",
+                "cmark": "gfm",
+                "llbuild": "main",
+                "swift-tools-support-core": "main",
+                "swiftpm": "main",
+                "swift-argument-parser": "1.2.2",
+                "swift-atomics": "1.0.2",
+                "swift-collections": "1.0.1",
+                "swift-crypto": "2.5.0",
+                "swift-certificates": "0.6.0",
+                "swift-asn1": "0.8.0",
+                "swift-driver": "main",
+                "swift-numerics": "1.0.1",
+                "swift-syntax": "main",
+                "swift-system": "1.1.1",
+                "swift-stress-tester": "main",
+                "swift-corelibs-xctest": "swiftwasm",
+                "swift-corelibs-foundation": "swiftwasm",
+                "swift-corelibs-libdispatch": "main",
+                "swift-integration-tests": "main",
+                "swift-xcode-playground-support": "main",
+                "ninja": "release",
+                "icu": "release-65-1",
+                "yams": "5.0.1",
+                "cmake": "v3.19.6",
+                "indexstore-db": "main",
+                "sourcekit-lsp": "main",
+                "swift-format": "main",
+                "swift-installer-scripts": "main",
+                "swift-docc": "main",
+                "swift-lmdb": "main",
+                "swift-docc-render-artifact": "main",
+                "swift-docc-symbolkit": "main",
+                "swift-markdown": "main",
+                "swift-cmark-gfm": "gfm",
+                "swift-nio": "2.31.2",
+                "swift-nio-ssl": "2.15.0",
+                "swift-experimental-string-processing": "swift/main"
+            }
+        },
         "main": {
             "aliases": ["swift/main", "main", "stable/20221013"],
             "repos": {
-- 
2.40.0

